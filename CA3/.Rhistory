.libPaths()
.libPaths(c("C:/Users/Mon/Documents/R/win-library/3.4", "C:/Program Files/Microsoft/R Client/R_SERVER/library"))
install.packages("pwr")
install.packages("dplyr")
library(pwr)
library(dplyr)
#Import table
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
#The same steps are performed on the third dataset
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H1_table_sample <- sample_n(H1a, 56) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
#CIA01 subset Test wether some counties were affected more than others -> H2
#attach(merged_dataset)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_table <- as.table(as.matrix(H2a)) # convert dataframe into a table so that power analysis be carried out
H2_Totals <- H2_table[, lapply(.SD, sum), by = State]
? table
library(data.table)
H2_Totals <- H2a %>% group_by(state) %>% summarise_all(funs(sum)) 
H2_Totals <- H2a %>% group_by(H2a$State) %>% summarise_all(funs(sum)) 
H2a %>% group_by(H2a$State) %>% summarise_all(funs(sum)) 
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables) 
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.2, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.1, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.05, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.01, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.15, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.8, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.6, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.7, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.9, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.7, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.6, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.1, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 8, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
H2_Totals <- as.table(as.matrix(H2_Tables, is.na)) # convert dataframe into a table so that power analysis be carried out
H2_Tables <- H2_Tables[!!rowSums(H2_Tables[, 2, with = FALSE])]
H2_Tables <- H2_Tables[-row(H2_Tables)[H2_Tables == 0],]
pwr.chisq.test(w = 0.5, df = 7, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables, is.na)) # convert dataframe into a table so that power analysis be carried out
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
H2_Tables <- round(H2_Tables$`sum(Before)`, H2_Tables$`sum(During)`, H2_Tables$`sum(After)`)
H2_Tables$`sum(Before)` <- round(H2_Tables$`sum(Before)`)
H2_Tables <- H2_Tables[-row(H2_Tables)[H2_Tables == 0],]
H2_Tables$`sum(Before)` <- round(H2_Tables$`sum(Before)`)
H2_Tables$`sum(During)` <- round(H2_Tables$`sum(During)`)
H2_Tables$`sum(After)` <- round(H2_Tables$`sum(After)`)
H2_Tables
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
H2_Tables <- H2_Tables[-row(H2_Tables)[H2_Tables == 0],]
H2_Tables$`sum(Before)` <- round(H2_Tables$`sum(Before)`)
H2_Tables$`sum(During)` <- round(H2_Tables$`sum(During)`)
H2_Tables$`sum(After)` <- round(H2_Tables$`sum(After)`)
H2_Tables
pwr.chisq.test(w = 0.5, df = 7, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
H2_Tables <- H2_Tables[-row(H2_Tables)[H2_Tables == 0],]
H2_Tables$`sum(Before)` <- round(H2_Tables$`sum(Before)`)
H2_Tables$`sum(During)` <- round(H2_Tables$`sum(During)`)
H2_Tables$`sum(After)` <- round(H2_Tables$`sum(After)`)
H2_Tables
library(pwr)
library(dplyr)
#Import table
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
#The same steps are performed on the third dataset
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H1_table_sample <- sample_n(H1a, 56) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
#CIA01 subset Test wether some counties were affected more than others -> H2
#attach(merged_dataset)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
H2_Tables <- H2_Tables[-row(H2_Tables)[H2_Tables == 0],]
H2_Tables$`sum(Before)` <- round(H2_Tables$`sum(Before)`)
H2_Tables$`sum(During)` <- round(H2_Tables$`sum(During)`)
H2_Tables$`sum(After)` <- round(H2_Tables$`sum(After)`)
H2_Tables
pwr.chisq.test(w = 0.5, df = 7, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
#The same steps are performed on the third dataset
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H1_table_sample <- sample_n(H1a, 56) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
#CIA01 subset Test wether some counties were affected more than others -> H2
#attach(merged_dataset)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
pwr.chisq.test(w = 0.5, df = 7, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
chisq.test(H2_Totals)
str(H2_Totals)
chisq.test(table(H2_Totals))
pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals))
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -5)]
head(H3a, 100)
H3
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -4, -5)]
head(H3a, 100)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -4, -5)]
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T)
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T)
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T)
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H3a
H3a <-[c(-2)]
H3a <- [c(-2)]
H3a <- H3a[c(-2)]
H3a
H3_Tables <- H3a %>% group_by(H2a$Sexes) %>% summarise(sum(During), sum(After))
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After))
H3_Tables
pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9)
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals))
chisq.test(H3_Totals)
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
#The same steps are performed on the third dataset
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H1_table_sample <- sample_n(H1a, 56) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
#HYPOTHESIS TEST 2
#CIA01 subset Test wether some counties were affected more than others -> H2
#attach(merged_dataset)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Ulster (part of"))
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Ulster (part of")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- subset(H2, H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Ulster (part of)")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals))
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
#H2a <- subset(H2, H2$State == "Kerry" | H2$State == "Meath" | H2$State == "Wicklow" | H2$State == "Dublin City" | H2$State == "South" | H2$State == "Ulster (part of)")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- H2
#H2a <- subset(H2, H2$State == "Kerry" | H2$State == "Meath" | H2$State == "Wicklow" | H2$State == "Dublin City" | H2$State == "South" | H2$State == "Ulster (part of)")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
#H2a <- subset(H2, H2$State == "Border" | H2$State == "Mid-West" | H2$State == "Southern and Eastern" | H2$State == "Border, Midland and Western" | H2$State == "Midland" | H2$State == "West" | H2$State == "South-West" | H2$State == "South-East"  | H2$State == "Ulster (part of)")
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
pwr.chisq.test(w = 0.5, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.3, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr.chisq.test(w = 0.5, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals))
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -4, -5)]
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T)
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T)
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T)
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H3a
#There is no before recession data, so this column is removed
H3a <- H3a[c(-2)]
H3a
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After))
H3_Tables
pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9)
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals))
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
str(CIA01)
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
#The same steps are performed on the third dataset
str(HRA31)
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H1_table_sample <- sample_n(H1a, 56) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#Add column names
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#adjust columns to match HRA 31
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01)
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#The same steps are performed on the second dataset
#Import table
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#Add column names
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
#adjust columns to match CIA01 and VSD030
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31)
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#The same steps are performed on the third dataset
#Import table
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#Add column names
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
#adjust columns to match HRA31 and CIA01
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30)
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#Check that all columns match
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#Now that all three datasets have the same columns in the same order, they can be binded vertically into one dataset
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#run effect size, check the notes .es
#run power analysis prior to summarizing to see how many records and put it in a dataframe
#create a subset with the number of records
#summarize
#chi-test
#set.seed
#sample_n call the n value
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
#attach(merged_dataset)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
library(pwr)
library(dplyr)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_1
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
plot(pwr_test_1)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_1
plot(pwr_test_1)
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA")
H1a <- H1[c(-2, -3, -4, -5)]
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T)
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T)
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T)
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.5, df = 3, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_1
plot(pwr_test_1)
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) 
nrow(H1_table_sample)
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table)
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2a <- H2 #I removed a step here where I tried to create a subset but it was leaving my dataset far too small.
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.5, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_2
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_2
plot(pwr_test_2)
H2_table <- sample_n(H2a, pwr_test_1$N + 1)
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals))
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -4, -5)]
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T)
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T)
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T)
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H3a
#There is no before recession data, so this column is removed
H3a <- H3a[c(-2)]
pwr_test_3 <- pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9)
pwr_test_3
plot(pwr_test_3)
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.9)
pwr_test_3
plot(pwr_test_3)
H3a <- sample_n(H3a, pwr_test_1$N + 1)
H3a
str(H3a)
H3a <- sample_n(H3a, pwr_test_3$N + 1)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA")
H3a <- H3[c(-1, -2, -4, -5)]
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T)
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T)
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T)
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H3a
#There is no before recession data, so this column is removed
H3a <- H3a[c(-2)]
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.9)
pwr_test_3
plot(pwr_test_3)
H3a <- sample_n(H3a, pwr_test_3$N + 1)
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After))
H3_Tables
#pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.9)
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals))
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
levels(H2$State)
H2
H2a <- H2 #I removed a step here where I tried to create a subset but it was leaving my dataset far too small.
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_2
plot(pwr_test_2)
H2_table <- sample_n(H2a, pwr_test_2$N + 1)
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
H2 <- merged_dataset[c(-1, -2, -3, -5)]
H2
H2a <- H2 #I removed a step here where I tried to create a subset but it was leaving my dataset far too small.
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T)
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T)
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T)
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)]
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
pwr_test_2
plot(pwr_test_2)
H2_table <- sample_n(H2a, pwr_test_2$N + 1)
str(H2_table)
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After))
H2_Tables
str(H2_Tables)
#pwr.chisq.test(w = 0.5, df = 47, sig.level = 0.5, power = 0.9) #tried sig.level of 0.2 because of my p value being so low, but I got the same results, also tried 0.5 effect size and 0.1 I didn't have enough data to use it.
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals))
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset of attributes All_Admissions and Disorder Type that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) # same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T)
H1_Totals
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Create a subset of attributes All_Admissions and Disorder Type that don't have NA in them.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 47, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2
plot(pwr_test_2)
H2_table <- sample_n(H2a, pwr_test_2$N + 1)
str(H2_table)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
H3a <- H3a[c(-2)] #There is no before recession data, so this column is removed
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_3
plot(pwr_test_3)
H3a <- sample_n(H3a, pwr_test_3$N + 1)
H3a
str(H3a)
.libPaths() #I was having problems with dplyr so I had to set the library paths, otherwise it would not install, I had to delete the dplyr library folder several times.
.libPaths(c("C:/Users/Mon/Documents/R/win-library/3.4", "C:/Program Files/Microsoft/R Client/R_SERVER/library"))
library(pwr)
library(dplyr)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE DATASET.
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#CIA01 subset Test wether some counties were affected more than others -> H2
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 4, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table <- sample_n(H2a, pwr_test_2$N + 1) #create a random sample using the N value from the power test 
str(H2_table) # check structure and number of records and if they match the N value from the power test
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After)) #using pipes take H2a dataset, then group by state and summarize the before, during and after attributes
H2_Tables
str(H2_Tables)
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals)) #chi square test performed on the random sample data as per power analysis results.
#HYPOTHESIS TEST 3
#VSD30 subset Test wether suicide rates affected both, women or men more -> H3
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
H3a <- H3a[c(-2)] #There is no before recession data, so this column is removed
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (3-1)
pwr_test_3 #show results from power test
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (3-1)
pwr_test_3 #show results from power test
pwr_test_3 <- pwr.chisq.test(w = 0.5, df = 2, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (3-1)
pwr_test_3 #show results from power test
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 2, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (3-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 4, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
#H3a <- H3a[c(-2)] #There is no before recession data, so this column is removed
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 4, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
#H3a <- H3a[c(-2)] #There is no before recession data, so this column is removed
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table <- sample_n(H2a, pwr_test_2$N + 1) #create a random sample using the N value from the power test 
str(H2_table) # check structure and number of records and if they match the N value from the power test
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After)) #using pipes take H2a dataset, then group by state and summarize the before, during and after attributes
H2_Tables
str(H2_Tables)
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals)) #chi square test performed on the random sample data as per power analysis results.
install.packages("gplots")
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
balloonplot(t(H1a), main = "All_Admissions", xlab = "", ylab "", label = FALSE, show.margins = FALSE)
H1b <- as.table(as.matrix(H1a))
balloonplot(t(H1a), main = "All_Admissions", xlab = "", ylab "", label = FALSE, show.margins = FALSE)
balloonplot(t(H1a), main = "H1a", xlab = "", ylab "", label = FALSE, show.margins = FALSE)
balloonplot(t(H1a), main = "H1b", xlab = "", ylab "", label = FALSE, show.margins = FALSE)
balloonplot(t(H1a), main ="H1b", xlab ="", ylab = "", label = FALSE, show.margins = FALSE)
balloonplot(t(H1a), main = "H1b", xlab = "", ylab = "", label = FALSE, show.margins = FALSE)
library(gplots)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
H1b <- as.table(as.matrix(H1a))
balloonplot(t(H1a), main = "H1b", xlab = "", ylab = "", label = FALSE, show.margins = FALSE)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
install.packages("corrplot")
library(corrplot)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq_1 <- chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
chisq_1
corrplot(chisq_1$residuals, is.cor = FALSE)
chisq_1$observed
corrplot(chisq_1$residuals, is.cor = FALSE)
str(chisq_1)
plot <- corrplot(chisq_1$residuals, is.cor = FALSE)
plot <- as.dataframe(corrplot(chisq_1$residuals, is.cor = FALSE))
plot <- as.data.frame(corrplot(chisq_1$residuals, is.cor = FALSE))
plot <- data.frame(corrplot(chisq_1$residuals, is.cor = FALSE))
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq_1 <- chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
chisq_1
str(chisq_1)
plot <- data.frame(chisq_1)
plot <- as.data.frame(chisq_1)
plot <- as.matrix(chisq_1)
chisq_1$observed
plot <- data.frame(corrplot(chisq_1$residuals, is.cor = FALSE))
plot <- data.frame(corrplot(plot$residuals, is.cor = FALSE))
plot <- as.matrix(chisq_1)
chisq_1$observed
plota <- data.frame(corrplot(plot$residuals, is.cor = FALSE))
plot <- corrplot(plot$residuals, is.cor = FALSE)
plot <- as.matrix(chisq_1)
plot <- corrplot(plot$residuals, is.cor = FALSE)
plot <- as.dataframe(as.matrix(chisq_1))
plot <- as.data.frame(as.matrix(chisq_1))
str(chisq_1)
plot <- data.frame(matrix(unlist(chisq_1)))
plot <- corrplot(plot$residuals, is.cor = FALSE)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq_1 <- chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
chisq_1
str(chisq_1)
plot <- data.frame(matrix(unlist(chisq_1)))
#plot <- as.data.frame(as.matrix(chisq_1))
#chisq_1$observed
plot <- corrplot(plot$residuals, is.cor = FALSE)
chisq_1
plot <- data.frame(matrix(unlist(chisq_1)))
plot <- corrplot(plot$residuals, is.cor = FALSE)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq_1 <- chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
chisq_1
str(chisq_1)
plot <- data.frame(matrix(unlist(chisq_1)))
plot1 <- as.matrix(plot)
corrplot(plot1$residuals, is.cor = FALSE)
plot1 <- data.frame(plot)
#plot <- as.data.frame(as.matrix(chisq_1))
#chisq_1$observed
corrplot(plot1$residuals, is.cor = FALSE)
plot <- data.frame(matrix(unlist(chisq_1)))
corrplot(plot$residuals, is.cor = FALSE)
corrplot(cor(plot$residuals), is.cor = FALSE)
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq_1 <- chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
chisq_1
str(chisq_1)
plot <- data.frame(matrix(unlist(chisq_1)))
#plot1 <- data.frame(plot)
#plot <- as.data.frame(as.matrix(chisq_1))
#chisq_1$observed
corrplot(cor(plot$residuals), is.cor = FALSE)
library(pwr)
library(dplyr)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1a)
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table <- sample_n(H2a, pwr_test_2$N + 1) #create a random sample using the N value from the power test 
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table <- sample_n(H2a, pwr_test_2$N + 1) #create a random sample using the N value from the power test 
str(H2_table) # check structure and number of records and if they match the N value from the power test
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After)) #using pipes take H2a dataset, then group by state and summarize the before, during and after attributes
H2_Tables
str(H2_Tables)
H2_Totals <- as.table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals)) #chi square test performed on the random sample data as per power analysis results.
#HYPOTHESIS TEST 3
#VSD30 subset Test wether suicide rates affected both, women or men more -> H3
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
str(H3a)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.1, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a_sample <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(h = ES.h(w = 0.3, df = 3, sig.level = 0.5, power = 0.9)) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w(0.1, 0.3, 0.5), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3, 0.5), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w1, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3, 0.5), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
pwr_effect_size <- pwr.chisq.test(h = c(0.1, 0.3, 0.8), n = NULL, sig.level = 0.05)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#CIA01 subset Test wether some counties were affected more than others -> H2
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
levels(H2a$All_Admissions)
levels(H2a$Disorder_Type)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
levels(H2a$All_Admissions)
levels(H2a$Disorder_Type)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
levels(H2a$All_Admissions)
levels(H2a$Disorder_Type)
levels(H2a[, 1])
levels(H2a[, 2])
lapply(H2a$All_Admissions, levels)
lapply(H2a, levels)
lapply(H2a, levels)H2a
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 5, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (6-1) = 5
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 5, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (6-1) = 5
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 5, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (6-1) = 5
str(H2a)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
#H2_Totals
H2_table <- as.table(as.matrix(H2_table_sample)) # convert dataframe into a table so that power analysis be carried out
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#HRA31 subset - Test wether some counties were affected more than others -> H2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -3)]
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
#H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
#H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
#H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table <- round(H2_table, digits = 0)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_table <- round(H2_table, digits = 0)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals <- round(H2_Totals, digits = 0)
H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
#H2_Totals
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders", H2a$Before + 1, H2a$During + 1, H2a$After +1)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a <- subset(H1a, H2a$Before + 1, H2a$During + 1, H2a$After + 1)
H2a <- subset(H1a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a %>% mutate_if(is.numeric, H2a(round(., 1)))
H2a %>% mutate_if(is.numeric, funs(round(., 1)))
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table %>% mutate_if(is.numeric, funs(round(., 1)))
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_round <- dt[, .SD, by = round(H2_table[, Before:After], 1)]
H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
library(pwr)
library(dplyr)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#HRA31 subset - Test wether some counties were affected more than others -> H2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals <- H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
#H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
H2_table <- dcast(melt(H2_table, id.vars = "col0"), variable ~ col0)
install.packages("reshape2")
library(reshape2)
library(pwr)
library(dplyr)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#HRA31 subset - Test wether some counties were affected more than others -> H2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_round <- H2_table[, .SD, by = round(H2_table[, Before:After], 1)]
H2_table <- dcast(melt(H2_table, id.vars = "col0"), variable ~ col0)
H2_table <- dcast(melt(H2_table, id.vars = "State"), variable ~ State)
H2_table <- dcast(melt(H2_table, id.vars = H2_table$State), variable ~ Col0)
dcast(melt(H2_table, id.vars = "State"), variable ~ col0)
dcast(melt(H2_table, id.vars = "Col0"), State ~ col0)
dcast(melt(H2_table, id.vars = "Col0"), H2_table$State ~ col0)
H2_table <- transpose(H2_table)
installed.packages("data.table")
install.packages("data.table")
library(data.table)
H2_table <- transpose(H2_table)
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table < H2_table[, .(unlist(H2_table)), by = .(State, Before, During, After)]
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table < H2_table[, .(unlist(H2_table)), by = .(State, Before, During, After)]
str(H2_table)
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_Table <- as.numeric(H2_table)
str(H2_Table)
H2_Totals
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
str(H2_Table)
H2_Totals
H2_table <- as.table(as.matrix((H2_Totals)) # convert dataframe into a table so that power analysis be carried out#H2_Table <- as.numeric(H2_table)str(H2_Table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_Table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H1[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_Table <- as.numeric(H2_table)
str(H2_Table)
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_Table)
library(pwr)
library(dplyr)
install.packages("pwr")
install.packages("dplyr")
install.packages("data.table")
library(pwr)
library(dplyr)
library(data.table)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#HRA31 subset - Test wether some counties were affected more than others -> H2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
library(pwr)
library(dplyr)
library(data.table)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
library(pwr)
library(dplyr)
library(data.table)
#DATASET 1 - IMPORT
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 3 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 3 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 3 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE 3 DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL THREE DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#HRA31 subset - Test wether some counties were affected more than others -> H2
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_Table)
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_Table <- as.numeric(H2_table)
str(H2_Table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_Table <- as.numeric(H2_table)
str(H2_Table)
str(H2_table)
H2_table <- as.numeric(H2_table)
str(H2_table)
str(H2_table)
H2_table[, Before := as.numeric(Before)]
str(H2_table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_Table <- as.numeric(H2_table)
str(H2_table)
H2_table[, (strTmp) := lapply(.SD, as.numeric), .SDcols = strTmp]
? :=
help(":=")
H2_table[, (strTmp) := lapply(.SD, as.numeric), .SDcols = strTmp]
H2_table[, (H2_table) := lapply(.SD, as.numeric), .SDcols = H2_table]
H2_table[, (Before:After) := lapply(.SD, as.numeric), .SDcols = Before:After]
H2_table[, (Before) := lapply(.SD, as.numeric), .SDcols = Before]
str(H2_table)
strTmp = c('Before', 'During', 'After') # Name of columns to be converted to numeric
H2_table[, (strTmp) := lapply(.SD, as.numeric), .SDcols = strTmp]
H2_table <- dt[, lapply(.SD, as.numeric, na.rm = T), .SDcols = strTmp]
H2_table <- H2_table[, lapply(.SD, as.numeric, na.rm = T), .SDcols = strTmp]
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_Table <- as.numeric(H2_table)
str(H2_table)
strTmp = c('Before', 'During', 'After') # Name of columns to be converted to numeric
H2_table <- H2_table[, lapply(.SD, as.numeric, na.rm = T), .SDcols = strTmp]
H2_table$Before <- as.numeric(H2_table$Before)
H2_table <- as.table(as.matrix(H2_Totals), stringAsfactors = FALSE) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table <- as.table(as.matrix(H2_Totals), stringAsfactors = TRUE) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_Totals
str(H2_Totals)
H2_table <- as.table(as.matrix(H2_Totals), stringAsfactors = TRUE) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
#H2a <- [, vch1, round(mydf[, 1:2], 1)]
#H2a %>% mutate_if(is.numeric, funs(round(., 1)))
#H2a <- subset(H2a, H2a$Before + 1 | H2a$During + 1 | H2a$After + 1)
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
#H2_Totals %>% mutate_if(is.numeric, funs(round(., 1)))
#H2_Totals <- round(H2_Totals$Before | H2_Totals$During | H2_Totals$After, digits = 0)
#H2_Totals <- colSums(H2_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H2_Totals
str(H2_Totals)
H2_table <- as.table.table(as.matrix(H2_Totals), stringAsfactors = TRUE) # convert dataframe into a table so that power analysis be carried out
H2_table <- as.data.table(as.matrix(H2_Totals), stringAsfactors = TRUE) # convert dataframe into a table so that power analysis be carried out
#H2_table$Before <- as.numeric(H2_table$Before)
#H2_Table <- as.numeric(H2_table)
str(H2_table)
H2_table <- as.data.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
#H2_table$Before <- as.numeric(H2_table$Before)
#H2_Table <- as.numeric(H2_table)
str(H2_table)
str(H2_Totals)
H2_table <- as.data.table(as.matrix(H2_Totals), stringAsFactors = FALSE) # convert dataframe into a table so that power analysis be carried out
#H2_table$Before <- as.numeric(H2_table$Before)
#H2_Table <- as.numeric(H2_table)
str(H2_table)
H2_table <- as.table(as.matrix(H2_Totals), stringAsFactors = FALSE) # convert dataframe into a table so that power analysis be carried out
#H2_table$Before <- as.numeric(H2_table$Before)
#H2_Table <- as.numeric(H2_table)
str(H2_table)
H2_table <- H2_table[, Before := as.numeric(Before)]
H2_table <- H2_table[, as.numeric(Before)]
H2_table <- as.data.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table <- H2_table[, Before := as.numeric(Before)]
#H2_table$Before <- as.numeric(H2_table$Before)
#H2_Table <- as.numeric(H2_table)
str(H2_table)
H2_table <- H2_table[, During := as.numeric(During)]
str(H2_table)
H2_table <- H2_table[, After := as.numeric(After)]
H2_table
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2_table <- as.data.table(as.matrix(H2_Totals), as.numeric)
str(H2_table)
H2_table <- as.table(as.matrix(H2_Totals), as.numeric)
str(H2_table)
H2 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H2
H2a <- H2[c(-3, -5)] # remove attributes that are not needed
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a <- H2a[c(-4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14)] #remove attributes that are not needed
H2a
str(H2a)
H2a <- subset(H2a, H2a$All_Admissions == "All_Admissions" | H2a$Disorder_Type == "All disorders")
H2a
str(H2a)
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 25, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, degrees of freedom (26-1) = 25
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table_sample <- sample_n(H2a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H2_table_sample) # check structure and number of records and if they match the N value from the power test
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals
str(H2_Totals)
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table <- H2_table[, Before := as.numeric(Before)] #convert attributes, Before, During and After to Numeric
H2_Table <- H2_table$.S3Class <- as.numeric(H2_table$.S3Class)
H2_table <- data.table(lapply(H2_table, as.numeric), stringsAsFactors = FALSE)
str(H2_table)
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals
str(H2_Totals)
H2_table <- as.table(as.matrix(H2_Totals, as.numeric), stringAsFactors = FALSE) # convert dataframe into a table so that power analysis be carried out
H2_table_1 <- data.table(lapply(H2_table, as.numeric), stringsAsFactors = FALSE)
H2_Totals
str(H2_Totals)
H2_table_1 <- as.table(as.matrix(H2_Totals, as.numeric), stringAsFactors = FALSE) # convert dataframe into a table so that power analysis be carried out
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
H2_table <- as.numeric(levels(H2_table))
str(H2_table)
H2_Totals
str(H2_Totals)
set.seed(1)
H2_table <- as.table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_Totals <- H2_table_sample[c(-1, -2)]
H2_Totals
str(H2_Totals)
H2_table <- table(H2_Totals) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table <- table(as.matrix(H2_Totals)) # convert dataframe into a table so that power analysis be carried out
str(H2_table)
H2_table
chisq.test(H2_table) #chi square test performed on the random sample data as per power analysis resuts.
H2a <- merged_dataset[c(-1, -2, -3, -5)] # Take the merged dataset and remove the columns that will not be required for this hypothesis test.
H2a
H2a$Before <- rowSums(H2a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H2a$During <- rowSums(H2a[, c("2008", "2013")], na.rm = T) #same as above
H2a$After <- rowSums(H2a[, c("2014", "2016")], na.rm = T) #same as above
H2a
H2a <- H2a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H2a
pwr_test_2 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_2 #show results from power test
plot(pwr_test_2) #plot power test
H2_table <- sample_n(H2a, pwr_test_2$N + 1) #create a random sample using the N value from the power test 
str(H2_table) # check structure and number of records and if they match the N value from the power test
H2_Tables <- H2a %>% group_by(H2a$State) %>% summarise(sum(Before), sum(During), sum(After)) #using pipes take H2a dataset, then group by state and summarize the before, during and after attributes
H2_Tables
str(H2_Tables)
H2_Totals <- table(as.matrix(H2_Tables)) # convert dataframe into a table so that power analysis be carried out
H2_Totals
H2_Totals
str(H2_Totals)
chisq.test(table(H2_Totals)) #chi square test performed on the random sample data as per power analysis results.
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
str(H1_table)
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#DATASET 1 - IMPORT - DEPRESSION RELATED HOSPITAL ADMISSIONS
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - ATTRIBUTE NAMING - SUICIDE RATES PER SEXES
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE TWO DATASETS HAVE MATCHING ATTRIBUTES
head(CIA01, 2)
head(VSD30, 2)
#BIND ALL TWO DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(CIA01, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
str(H1_table)
H1a
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
merged_dataset <- rbind(CIA01, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
CIA01 <- read.csv("Data/CIA01.csv")
head(CIA01)
str(CIA01)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("State", "Household_Income", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015") #create a vector with the column names
colnames(CIA01) <- colnames #apply the column names to my_data dataframe
head(CIA01, 5) #display first 5 rows, so that we can check that the column names have changed.
str(CIA01)
#DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
CIA01 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "Sexes" = NA, "2016" = NA, CIA01) #Add columns to the dataset and fill the new columns with NA.
CIA01 <- CIA01[c(1:3, 5:16, 4)]
head(CIA01)
str(CIA01)
#DATASET 2 - ATTRIBUTE NAMING - SUICIDE RATES PER SEXES
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
library(pwr)
library(dplyr)
library(data.table)
#DATASET 1 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 2 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE TWO DATASETS HAVE MATCHING ATTRIBUTES
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL TWO DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
str(H1_table)
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#VSD30 subset Test wether suicide rates affected both, women or men more -> H3
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
#DATASET 1 - IMPORT
HRA31 <- read.csv("Data/HRA31.csv")
head(HRA31)
str(HRA31)
#DATASET 1 - ATTRIBUTE NAMING
colnames <- c("All_Admissions", "Disorder_Type", "State", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(HRA31) <- colnames #apply the column names to my_data dataframe
head(HRA31, 5) #display first 5 rows, so that we can check that the column names have changed.
str(HRA31)
##DATASET 1 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
HRA31 <- cbind("Sexes" = NA, "Household_Income" = NA, HRA31) #Add columns to the dataset and fill the new columns with NA.
HRA31 <- HRA31[c(3:4, 1, 5, 2, 6:16)]
head(HRA31)
str(HRA31)
#DATASET 2 - IMPORT
VSD30 <- read.csv("Data/VSD30.csv")
head(VSD30)
str(VSD30)
#DATASET 2 - ATTRIBUTE NAMING
colnames <- c("Sexes", "State", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016") #create a vector with the column names
colnames(VSD30) <- colnames #apply the column names to my_data dataframe
head(VSD30, 5) #display first 5 rows, so that we can check that the column names have changed.
str(VSD30)
##DATASET 2 - ATTRIBUTE MANIPULATION TO MATCH THE OTHER DATASETS
VSD30 <- cbind("All_Admissions" = NA, "Disorder_Type" = NA, "2006" = NA, "2007" = NA, "Household_Income" = NA, VSD30) #Add columns to the dataset and fill the new columns with NA.
VSD30 <- VSD30[c(1:2, 6, 7, 5, 3:4, 8:16)]
head(VSD30)
str(VSD30)
#CHECK THAT THE TWO DATASETS HAVE MATCHING ATTRIBUTES
head(HRA31, 2)
head(VSD30, 2)
#BIND ALL TWO DATASETS VERTICALLY CREATING ONE MERGED DATASET.
merged_dataset <- rbind(HRA31, VSD30) #bind all three dataframes vertically.
head(merged_dataset)
str(merged_dataset)
#HYPOTHESIS TEST 1
#HRA31 subset - Did admissions go up during the recession period? -> H1
H1 <- subset(merged_dataset, merged_dataset$All_Admissions != "NA" | merged_dataset$Disorder_Type != "NA") # Create a subset from the merged dataset with All_Admissions and Disorder Type of attributes that don't have NA in them.
H1a <- H1[c(-2, -3, -4, -5)] # remove attributes that are not needed
H1a
H1a$Before <- rowSums(H1a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H1a$During <- rowSums(H1a[, c("2008", "2013")], na.rm = T) #same as above
H1a$After <- rowSums(H1a[, c("2014", "2016")], na.rm = T) #same as above
H1a
H1a <- H1a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H1a
str(H1a)
pwr_test_1 <- pwr.chisq.test(w = ES.w1(0.1, 0.3), df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 3 degrees of freedom (4-1)
pwr_test_1 #show results from power test
plot(pwr_test_1) #plot power test
H1_table_sample <- sample_n(H1a, pwr_test_1$N + 1) #create a random sample using the N value from the power test 
str(H1_table_sample) # check structure and number of records and if they match the N value from the power test
H1_Totals <- colSums(H1_table_sample[, c("Before", "During", "After")], na.rm = T) #sum up the columns from the random sample
H1_Totals
H1_table <- as.table(as.matrix(H1_Totals)) # convert dataframe into a table so that power analysis be carried out
H1_table
str(H1_table)
chisq.test(H1_table) #chi square test performed on the random sample data as per power analysis resuts.
#HYPOTHESIS TEST 2
#VSD30 subset Test wether suicide rates affected both, women or men more -> H3
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.8) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables$Total <- rowSums(H3_Tables[, c("During", "After")]) 
H3_Tables
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Total <- rowSums(H3a[, c("2006", "2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Total <- rowSums(H3a[, c("2006":"2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$Total <- rowSums(H3a[, c("2006"~"2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$Total <- rowSums(H3a[, c("2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015","2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a
H3a <- H3a[c(-3, -4, -5, -6, -7, -8, -9, -10, -11, -12, -13)] #remove attributes that are not needed
H3a
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Total <- rowSums(H3a[, c("2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015","2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
#H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
#H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -4, -5, -6, -7, -8, -9, -10, -11, -12, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Total <- rowSums(H3a[, c("2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015","2016")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
#H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
#H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, 03, -4, -5, -6, -7, -8, -9, -10, -11, -12, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(Total)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3 <- subset(merged_dataset, merged_dataset$Sexes != "NA") # Create a subset from the merged dataset of All_Admissions and Disorder Type attributes that don't have NA in them.
H3a <- H3[c(-1, -2, -4, -5)] 
H3a$Before <- rowSums(H3a[, c("2006", "2007")], na.rm = T) #sum the years attributes into before, during and after Ireland's recession period.
H3a$During <- rowSums(H3a[, c("2008", "2013")], na.rm = T) #same as above
H3a$After <- rowSums(H3a[, c("2014", "2016")], na.rm = T) #same as above
H3a
H3a <- H3a[c(-2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12)] #remove attributes that are not needed
H3a
pwr_test_3 <- pwr.chisq.test(w = 0.3, df = 3, sig.level = 0.5, power = 0.9) #power chi square passed onto a variable so the N value can be used when creating a random sample, used small effect size with 2 degrees of freedom (4-1)
pwr_test_3 #show results from power test
plot(pwr_test_3) #plot power test
H3a <- sample_n(H3a, pwr_test_3$N + 1) #create a random sample using the N value from the power test 
H3a
str(H3a)
H3_Tables <- H3a %>% group_by(H3a$Sexes) %>% summarise(sum(During), sum(After)) #using pipes take H3a dataset, then group by state and summarize the before, during and after attributes
H3_Tables
H3_Totals <- as.table(as.matrix(H3_Tables)) # convert dataframe into a table so that power analysis be carried out
H3_Totals
str(H3_Totals)
chisq.test(table(H3_Totals)) #chi square test performed on the random sample data as per power analysis results.
